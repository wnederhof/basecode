{{#if hasRelations}}package {{ groupId }}.{{ artifactId }}.{{ nameLowerCase }}
{{#each fields}}{{#if isFieldRelational}}
import {{ groupId }}.{{ artifactId }}.{{ fieldTypeLowerCase }}.{{ fieldTypePascalCase }}Event.Before{{ fieldTypePascalCase }}DeletedEvent{{/if}}{{/each}}
import org.springframework.context.event.EventListener
import org.springframework.stereotype.Component

@Component
class {{ namePascalCase }}Listener{{#if hasRelations}}(
    private val {{ nameCamelCase }}Service: {{ namePascalCase }}Service
) {
{{#each fields}}{{#if isFieldRelational}}
    @EventListener
    fun deleteBefore{{ fieldTypePascalCase }}Deleted(event: Before{{ fieldTypePascalCase }}DeletedEvent) {
        {{ nameCamelCase }}Service.deleteBy{{ fieldNamePascalCase }}(event.id)
    }
{{/if}}{{/each}}
}{{/if}}{{/if}}
