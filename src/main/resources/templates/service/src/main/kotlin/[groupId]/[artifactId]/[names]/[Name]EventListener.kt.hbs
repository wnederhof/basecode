package {{ groupId }}.{{ artifactId }}.{{ names }}

{{#each fields}}{{#if fieldRelationship}}import {{ groupId }}.{{ artifactId }}.{{ fieldTypes }}.{{ FieldType }}Event.Before{{ FieldType }}DeletedEvent
{{/if}}{{/each}}
import org.springframework.context.event.EventListener
import org.springframework.stereotype.Component

@Component
class {{ Name }}EventListener(private val {{ name }}Service: {{ Name }}Service) {
{{#each fields}}{{#if fieldRelationship}}
    @EventListener
    fun onBefore{{ FieldType }}DeletedEvent(event: Before{{ FieldType }}DeletedEvent) {
        commentService.deleteBy{{ FieldName }}(event.id)
    }{{/if}}{{/each}}

}